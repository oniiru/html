steal("jquery/controller","jquery/view/ejs").then("mp/core/flash/views/init.ejs"+motopress.pluginVersionParam,function($){$.Controller("MP.Flash",{type:"warning",message:null,cssClass:"alert fade in",newCssClass:"",element:null,setFlash:function(message,type){MP.Flash.message=message;if(typeof type!=="undefined"){MP.Flash.type=type}MP.Flash.newCssClass=MP.Flash.cssClass;switch(MP.Flash.type){case"info":MP.Flash.newCssClass+=" alert-info";break;case"success":MP.Flash.newCssClass+=" alert-success";break;case"error":MP.Flash.newCssClass+=" alert-error";break}},showMessage:function(){if(MP.Flash.message){MP.Flash.element.html("//mp/core/flash/views/init.ejs"+motopress.pluginVersionParam,{cssClass:MP.Flash.newCssClass,type:MP.Flash.type,message:MP.Flash.message});var alert=MP.Flash.element.find(".alert");var flashTimer=setTimeout(function(){alert.alert("close");MP.Flash.message="";clearTimeout(flashTimer)},10000)}}},{init:function(){MP.Flash.element=this.element;this.element.html("//mp/core/flash/views/init.ejs"+motopress.pluginVersionParam,{cssClass:MP.Flash.cssClass,type:MP.Flash.type,message:MP.Flash.message})}})});steal("jquery/class",function($){$.Class("MP.Utils",{validationError:$("<div />",{"class":"motopress-validation-error"}),tbStyle:null,tbShow:null,tbRemove:null,jQueryUIOpen:null,jQueryUIClose:null,strtr:function(str,from,to){if(typeof from==="object"){var cmpStr="";for(var j=0;j<str.length;j++){cmpStr+="0"}var offset=0;var find=-1;var addStr="";for(fr in from){offset=0;while((find=str.indexOf(fr,offset))!=-1){if(parseInt(cmpStr.substr(find,fr.length))!=0){offset=find+1;continue}for(var k=0;k<from[fr].length;k++){addStr+="1"}cmpStr=cmpStr.substr(0,find)+addStr+cmpStr.substr(find+fr.length,cmpStr.length-(find+fr.length));str=str.substr(0,find)+from[fr]+str.substr(find+fr.length,str.length-(find+fr.length));offset=find+from[fr].length+1;addStr=""}}return str}for(var i=0;i<from.length;i++){str=str.replace(new RegExp(from.charAt(i),"g"),to.charAt(i))}return str},uniqid:function(prefix,more_entropy){if(typeof prefix=="undefined"){prefix=""}var retId;var formatSeed=function(seed,reqWidth){seed=parseInt(seed,10).toString(16);if(reqWidth<seed.length){return seed.slice(seed.length-reqWidth)}if(reqWidth>seed.length){return Array(1+(reqWidth-seed.length)).join("0")+seed}return seed};if(!this.php_js){this.php_js={}}if(!this.php_js.uniqidSeed){this.php_js.uniqidSeed=Math.floor(Math.random()*123456789)}this.php_js.uniqidSeed++;retId=prefix;retId+=formatSeed(parseInt(new Date().getTime()/1000,10),8);retId+=formatSeed(this.php_js.uniqidSeed,5);if(more_entropy){retId+=(Math.random()*10).toFixed(8).toString()}return retId},version_compare:function(v1,v2,operator){this.php_js=this.php_js||{};this.php_js.ENV=this.php_js.ENV||{};var i=0,x=0,compare=0,vm={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},prepVersion=function(v){v=(""+v).replace(/[_\-+]/g,".");v=v.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".");return(!v.length?[-8]:v.split("."))},numVersion=function(v){return !v?0:(isNaN(v)?vm[v]||-7:parseInt(v,10))};v1=prepVersion(v1);v2=prepVersion(v2);x=Math.max(v1.length,v2.length);for(i=0;i<x;i++){if(v1[i]==v2[i]){continue}v1[i]=numVersion(v1[i]);v2[i]=numVersion(v2[i]);if(v1[i]<v2[i]){compare=-1;break}else{if(v1[i]>v2[i]){compare=1;break}}}if(!operator){return compare}switch(operator){case">":case"gt":return(compare>0);case">=":case"ge":return(compare>=0);case"<=":case"le":return(compare<=0);case"==":case"=":case"eq":return(compare===0);case"<>":case"!=":case"ne":return(compare!==0);case"":case"<":case"lt":return(compare<0);default:return null}},inObject:function(value,obj){var result=false;for(var key in obj){if(obj[key].toLowerCase()==value.toLowerCase()){result=true;break}}return result},removeByValue:function(value,arr){if(arr.indexOf(value)!==-1){arr.splice(arr.indexOf(value),1);return true}else{return false}},doSortSelectByText:function(select){if(!select.children("optgroup").length){var sortedVals=$.makeArray(select.children("option")).sort(function(a,b){return $(a).text()>$(b).text()?1:$(a).text()<$(b).text()?-1:0});select.empty().html(sortedVals)}else{select.children("optgroup").each(function(){var sortedVals=$.makeArray($(this).children("option")).sort(function(a,b){return $(a).text()>$(b).text()?1:$(a).text()<$(b).text()?-1:0});$(this).empty().html(sortedVals)})}},addParamToUrl:function(url,key,value){var query=url.indexOf("?");var anchor=url.indexOf("#");if(query==url.length-1){url=url.substring(0,query);query=-1}return(anchor>0?url.substring(0,anchor):url)+(query>0?"&"+key+"="+value:"?"+key+"="+value)+(anchor>0?url.substring(anchor):"")},removeParamFromUrl:function(url,param){var expr=new RegExp(param+"\\=([a-z0-9]+)","i");var match=url.match(expr);if(match){var urlPart=match[0];if(url.search("&"+urlPart)>=0){url=url.replace("&"+urlPart,"")}else{if(url.search("\\?"+urlPart+"&")>=0){url=url.replace("?"+urlPart+"&","")}else{if(url.search("\\?"+urlPart)>=0){url=url.replace("?"+urlPart,"")}}}}return url},showValidationError:function(message,afterElement){var oldValidationError=afterElement.next(".motopress-validation-error");if(oldValidationError.length){oldValidationError.remove()}var validationError=this.validationError.clone();validationError.text(message).insertAfter(afterElement)},getScrollbarWidth:function(){var scrollWidth=window.browserScrollbarWidth;if(typeof scrollWidth==="undefined"){var div=$('<div style="width: 50px; height: 50px; position: absolute; left: -100px; top: -100px; overflow: auto;"><div style="width: 1px; height: 100px;"></div></div>');$("body").append(div);scrollWidth=div[0].offsetWidth-div[0].clientWidth;div.remove()}return scrollWidth},getSpanClass:function(classes){var expr=new RegExp("^(span|mp-span)\\d{1,2}$","i");var spanClass=null;for(var i=0;i<classes.length;i++){if(expr.test(classes[i])){spanClass=classes[i];break}}return spanClass},getSpanNumber:function(spanClass){var exprNumber=new RegExp("\\d{1,2}","i");return parseInt(spanClass.match(exprNumber))},notClone:function(span,ui){return(ui===null||(span[0]!==ui.draggable[0]&&span[0]!==ui.helper[0]))?true:false},calcSpanNumber:function(row,ui){var spans=row.children('[class*="span"]');var spanCount=0;if(spans.length){spans.each(function(){if(MP.Utils.notClone($(this),ui)){var spanNumber=MP.Utils.getSpanNumber(MP.Utils.getSpanClass($(this).prop("class").split(" ")));spanCount+=spanNumber}})}return spanCount},getHandleClass:function(classes){var expr=new RegExp("^ui-resizable-(n|e|s|w|se|sw)$","i");var handleClass=null;for(var i=0;i<classes.length;i++){if(expr.test(classes[i])){handleClass=classes[i];break}}return handleClass},setup:function(){var userAgent=navigator.userAgent.toLowerCase();this.Browser={Version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[])[1],Chrome:/chrome/.test(userAgent),Safari:/webkit/.test(userAgent),Opera:/opera/.test(userAgent),IE:/msie/.test(userAgent)&&!/opera/.test(userAgent),Mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}},getEditorActiveMode:function(classes){var expr=new RegExp("^(tmce|html)-active$","i");var activeMode=null;for(var i=0;i<classes.length;i++){if(expr.test(classes[i])){activeMode=classes[i]}}return activeMode},addWindowFix:function(){if(typeof tb_show==="function"&&typeof tb_remove==="function"){this.tbStyle=$("<style />",{type:"text/css",text:"#TB_overlay {z-index: 1051;} #TB_window {z-index: 1052;}"}).appendTo("head");this.tbShow=tb_show;tb_show=function(){if(typeof CE.CodeModal!=="undefined"&&CE.CodeModal.myThis.element.length){CE.CodeModal.myThis.element.hide()}MP.Utils.tbShow.apply(this,arguments)};this.tbRemove=tb_remove;tb_remove=function(){if(typeof CE.CodeModal!=="undefined"&&CE.CodeModal.myThis.element.length){CE.CodeModal.myThis.element.show()}MP.Utils.tbRemove.apply(this,arguments)}}if(typeof $.ui.dialog.prototype.open==="function"&&typeof $.ui.dialog.prototype.close==="function"){this.jQueryUIOpen=$.ui.dialog.prototype.open;$.ui.dialog.prototype.open=function(){if(typeof CE.CodeModal!=="undefined"&&CE.CodeModal.myThis.element.length){CE.CodeModal.myThis.element.removeAttr("tabindex")}MP.Utils.jQueryUIOpen.apply(this,arguments)};this.jQueryUIClose=$.ui.dialog.prototype.close;$.ui.dialog.prototype.close=function(){if(typeof CE.CodeModal!=="undefined"&&CE.CodeModal.myThis.element.length){CE.CodeModal.myThis.element.attr("tabindex","-1")}MP.Utils.jQueryUIClose.apply(this,arguments)}}},removeWindowFix:function(){if(this.tbStyle!==null&&this.tbShow!==null&&this.tbRemove!==null){this.tbStyle.remove();tb_show=this.tbShow;tb_remove=this.tbRemove}if(this.jQueryUIOpen!==null&&this.jQueryUIClose!==null){$.ui.dialog.prototype.open=this.jQueryUIOpen;$.ui.dialog.prototype.close=this.jQueryUIClose}}},{})});steal("jquery/controller",function($){$.Controller("CE.Iframe",{myThis:null,window:null,contents:null,tmpPostId:null},{grid:$("<div />",{id:"motopress-ce-grid","class":"mp-container"}),init:function(el){CE.Iframe.myThis=this;CE.Iframe.window=this.element[0].contentWindow;el.addClass("motopress-tmp-iframe-width");this.renderContent();el.on("load",this.proxy("onLoad"))},onLoad:function(){CE.Navbar.myThis.onIframeLoad(this.element);CE.Iframe.contents=this.element.contents();CE.Iframe.contents.find('link[href*="js_composer"]').remove();var head=CE.Iframe.contents.find("head")[0];var stealVerScript=$("<script />",{text:'var steal = { production: "mp/ce/iframeProd/production.js" + parent.motopress.pluginVersionParam };'})[0];this.appendScript(head,stealVerScript);var script=$("<script />",{src:MP.Settings.pluginRootUrl+"/"+MP.Settings.pluginName+"/steal/steal.production.js?mp/ce/iframeProd"})[0];this.appendScript(head,script);var iframeBody=CE.Iframe.contents.find("body");iframeBody.find("#wp-motopress-tmp-editor-wrap").hide();var sceneContent=iframeBody.find(".motopress-content-wrapper");var sceneContentWidth=sceneContent.width();this.element.removeClass("motopress-tmp-iframe-width");iframeBody.addClass("motopress-body");sceneContent.find("script").remove();var wrappers=sceneContent.parents();var lastIndex=wrappers.length-3;sceneContent.siblings(":not(link, style, script)").remove();wrappers.each(function(i){$(this).addClass("motopress-content-wrapper-default");$(this).siblings(":not(link, style, script)").remove();return(i<lastIndex)});$(sceneContent[0]).wrap('<div class="mp-span12" />').parent().wrap('<div class="mp-row-fluid motopress-row" />').parent().wrap('<div id="motopress-container" class="mp-container" />');var sceneContainer=sceneContent.closest("#motopress-container");if(sceneContentWidth<400){sceneContentWidth=400;sceneContainer.css("min-width",sceneContentWidth);this.grid.css("min-width",sceneContentWidth)}else{if(sceneContentWidth>1170){sceneContentWidth=1170}}sceneContainer.css("max-width",sceneContentWidth);this.grid.css("max-width",sceneContentWidth);this.unwrapGrid(iframeBody);iframeBody.prepend(this.grid);$("body").hide(0,function(){$("body").show()});$.ajax({url:motopress.ajaxUrl,data:{action:"motopress_ce_remove_temporary_post",nonce:motopressCE.nonces.motopress_ce_remove_temporary_post,post_id:CE.Iframe.tmpPostId,postID:motopressCE.postID},type:"POST",error:function(jqXHR){var error=$.parseJSON(jqXHR.responseText);if(error.debug){console.log(error.message)}else{MP.Flash.setFlash(error.message,"error");MP.Flash.showMessage()}}})},unwrapGrid:function(iframeBody){iframeBody.find('div[data-motopress-group="grid"]').each(function(){var name=$(this).attr("data-motopress-shortcode");var attrs=$(this).attr("data-motopress-parameters");var child=$(this).children("div");child.attr("data-motopress-shortcode",name);if(attrs.length){child.attr("data-motopress-parameters",attrs)}child.unwrap()})},renderContent:function(){var content=this.getTinyMCEContent();var postId=$("#motopress-ce-btn").attr("data-post-id");$.ajax({url:motopress.ajaxUrl,type:"POST",dataType:"json",data:{action:"motopress_ce_render_content",nonce:motopressCE.nonces.motopress_ce_render_content,data:content,post_id:postId,postID:motopressCE.postID},success:function(data){CE.Iframe.tmpPostId=data.post_id;var src=MP.Utils.addParamToUrl(data.src,"motopress-ce",1);CE.Iframe.window.location.replace(src)},error:function(jqXHR){console.log(jqXHR.responseText);var error=$.parseJSON(jqXHR.responseText);console.log(error.message)}})},getTinyMCEContent:function(){switchEditors.switchto($("#content-tmce")[0]);var content="";if(typeof(tinyMCE)!=="undefined"){var editor=tinyMCE.get("content");if(typeof editor==="undefined"){content=$("#wp-content-editor-container #content").val()}else{content=editor.getContent({format:"html"})}}else{MP.Flash.setFlash("TinyMCE is undefined","error");MP.Flash.showMessage()}return content},appendScript:function(head,script){head.appendChild(script)},prependScript:function(parent,script){parent.insertBefore(script,parent.firstChild)}})});steal("jquery/controller").then("mp/ce/save/save.js"+motopress.pluginVersionParam).then(function($){$.Controller("CE.Navbar",{myThis:null},{preloader:$("#motopress-preload"),iframe:$("#motopress-content-editor-scene"),scrollWidth:15,postStatus:null,postNameObj:null,wpPostNameForm:null,wpPostName:null,init:function(el){CE.Navbar.myThis=this;CE.Iframe.myThis=null;this.wpPostNameForm=$('form[name="post"] input[name="post_title"]');this.postNameObj=el.find(".motopress-page-name").children("span");this.setupBtns();$('link[href*="js_composer"]').remove();this.showContentEditor();$("#motopress-ce-btn").on("click",function(){new CE.Iframe($("#motopress-content-editor-scene"));CE.Navbar.myThis.showContentEditor()});if($("#motopress-content-editor-scene-wrapper").height()===0){var h1=$("#motopress-content-editor-scene-wrapper").parent().height()-53;if(h1>0){$("#motopress-content-editor-scene-wrapper").height(h1)}var h2=$("#motopress-content-editor").parent().height()-28;if(h2>0){$("#motopress-content-editor").height(h2)}$(window).resize(function(){var h1=$("#motopress-content-editor-scene-wrapper").parent().height()-53;if(h1>0){$("#motopress-content-editor-scene-wrapper").height(h1)}var h2=$("#motopress-content-editor").parent().height()-28;if(h2>0){$("#motopress-content-editor").height(h2)}})}},onIframeLoad:function(iframe){this.wpPostName=this.wpPostNameForm.val();if(this.wpPostName.length===0){this.postNameObj.empty().append($("<i />",{text:localStorage.getItem("CEEmptyPostTitle")}))}else{this.postNameObj.text(this.wpPostName)}this.scrollWidth=MP.Utils.getScrollbarWidth();var minWidth=this.scrollWidth+724+80;iframe.css("min-width",minWidth);$(".motopress-content-editor-navbar.ce_navbar").css("min-width",minWidth)},setupBtns:function(){var saveBtn=$("form#post input#save-post");var btnText="";if(saveBtn.length){this.postStatus="draft";btnText=localStorage.getItem("CEPublishBtnText")}else{this.postStatus="published";btnText=localStorage.getItem("CEUpdateBtnText");$("#motopress-content-editor-save").hide()}$("#motopress-content-editor-publish").text(btnText)},"#motopress-content-editor-publish click":function(){CE.Save.save();this.preload(true);this.setPluginAutoOpen(true);$("form#post #publish").click()},"#motopress-content-editor-save click":function(){CE.Save.save();this.preload(true);this.setPluginAutoOpen(true);$("form#post #save-post").click()},"#motopress-content-editor-preview click":function(){CE.Save.save();$("form#post #post-preview").click()},"#motopress-content-editor-delete click":function(){CE.Iframe.window.CE.Tools.myThis.removeBlock();CE.Save.changeContent()},"#motopress-content-editor-close click":function(){CE.Save.save();this.hideContentEditor();$("#motopress-content-editor-scene").off("load");MP.Utils.removeWindowFix();this.hideObjectControlBtns()},hideContentEditor:function(){$("html").css({overflow:"auto",paddingTop:28});$("#motopress-content-editor").hide();$("body > #wpadminbar").prependTo("#wpwrap > #wpcontent");$("#wpwrap").show()},showContentEditor:function(){$("html").css({overflow:"hidden",paddingTop:0});$("#wpwrap").hide();$("#wpwrap > #wpcontent > #wpadminbar").prependTo("body");$("#motopress-content-editor").show()},preload:function(flag){if(flag){this.preloader.show()}else{this.preloader.fadeOut("slow");MP.Flash.showMessage()}},showObjectControlBtns:function(){$(".motopress-object-control-btns").css("display","inline-block")},hideObjectControlBtns:function(){$(".motopress-object-control-btns").css("display","none")},setPluginAutoOpen:function(value){sessionStorage.setItem("pluginAutoOpen",value)},getPluginAutoOpen:function(){sessionStorage.getItem("pluginAutoOpen")}})});steal("jquery/class").then("mp/core/language/language.js"+motopress.pluginVersionParam,function($){$.Class("MP.Settings",{siteUrl:null,pluginRootUrl:null,pluginName:null,themeRoot:null,themeRootUrl:null,currentTheme:null,themeWrapperRoot:null,themeWrapperRootUrl:null,themeLoopRoot:null,themeLoopRootUrl:null,lang:null,loadScriptsUrl:null,setup:function(){if(typeof CE==="undefined"){this.removeWpPanels()}this.getSiteUrl();this.getWpSettings()},removeWpPanels:function(){$("#footer, #adminmenuwrap, #adminmenuback, .update-nag").remove();$("#wpcontent").css("margin-left",0);$("#wpbody-content").css("padding-bottom",0);$("#wpfooter").remove()},getSiteUrl:function(){var href=window.location.href;var hrefLen=href.indexOf("/wp-admin/");this.siteUrl=href.substr(0,hrefLen)},getWpSettings:function(){var nonce=null;var postID=null;if(typeof motopressLE!=="undefined"){nonce=motopressLE.nonces.motopress_ce_get_wp_settings;postID=false}else{nonce=motopressCE.nonces.motopress_ce_get_wp_settings;postID=motopressCE.postID}$.ajax({url:motopress.ajaxUrl,data:{action:"motopress_ce_get_wp_settings",nonce:nonce,postID:postID},dataType:"json",type:"POST",success:function(data){MP.Settings.debug=data.debug;MP.Settings.adminUrl=data.admin_url;MP.Settings.pluginRootUrl=data.plugin_root_url;MP.Settings.pluginName=data.plugin_name;MP.Settings.themeRoot=data.theme_root;MP.Settings.themeRootUrl=data.theme_root_url;MP.Settings.currentTheme=data.current_theme;MP.Settings.parentTheme=data.parent_theme;MP.Settings.themeWrapperRoot=data.theme_wrapper_root;MP.Settings.themeWrapperRootUrl=data.theme_wrapper_root_url;MP.Settings.themeLoopRoot=data.theme_loop_root;MP.Settings.parentThemeLoopRoot=data.parent_theme_loop_root;MP.Settings.themeLoopRootUrl=data.theme_loop_root_url;MP.Settings.lang=data.lang;MP.Settings.loadScriptsUrl=data.load_scripts_url;if(MP.Utils.Browser.IE||MP.Utils.Browser.Opera){window.location=MP.Settings.adminUrl+"?page="+MP.Settings.pluginName}new MP.Language()},error:function(){MP.Flash.setFlash(localStorage.getItem("wpSettingsError"),"error");MP.Flash.showMessage()}})}},{})});steal("jquery/controller",function($){$.Controller("CE.CodeModal",{myThis:null,currentSpan:null,listensTo:["show","shown","hide"]},{iframeBody:null,content:null,wpEditor:null,editor:null,saveBtn:null,init:function(){CE.CodeModal.myThis=this;this.wpEditor=typeof(tinyMCE)!=="undefined"?tinyMCE.get("content"):null;this.content=this.element.find("#motopress-code-content");if(typeof tinyMCE.get("motopress-code-content")!=="undefined"){this.editor=tinyMCE.get("motopress-code-content")}this.saveBtn=this.element.find("#motopress-save-code-content");this.element.modal({show:false});$(window).on("resize",this.proxy("resize"));MP.Utils.addWindowFix()},setSize:function(isHidden){var footer=this.element.find(".modal-footer");var footerWidth=this.element.width()-(parseFloat(footer.css("padding-left"))+parseFloat(footer.css("padding-right")));footer.width(footerWidth);var body=this.element.find(".modal-body");var bodyHeight=this.element.height()-this.element.find(".modal-header").outerHeight()-parseFloat(body.css("margin-top"))-parseFloat(body.css("margin-bottom"))-footer.outerHeight();body.height(bodyHeight);if(isHidden){this.element.css({display:"block",visibility:"hidden"})}var container=this.element.find("#wp-motopress-code-content-editor-container");var containerHeight=this.element.find("#wp-motopress-code-content-wrap").height()-this.element.find("#wp-motopress-code-content-editor-tools").height()-parseFloat(container.css("border-top-width"))-parseFloat(container.css("border-bottom-width"));container.height(containerHeight);var contentHeight=containerHeight-this.element.find("#qt_motopress-code-content_toolbar").outerHeight()-parseFloat(this.content.css("padding-top"))-parseFloat(this.content.css("padding-bottom"));this.content.height(contentHeight);var contentIfr=this.element.find("#motopress-code-content_ifr");var mceFirst=container.find("tr.mceFirst:first");var mceLast=container.find("tr.mceLast:last");var contentIfrHeight=containerHeight-mceFirst.height()-mceLast.height();contentIfr.height(contentIfrHeight);if(isHidden){this.element.css({display:"",visibility:""});this.content.removeAttr("rows")}},resize:function(){if(this.element.data("modal").isShown){this.setSize(false)}},show:function(){this.setSize(true);this.switchVisual();if(this.iframeBody===null){this.iframeBody=this.element.find("#motopress-code-content_ifr").contents().find(".motopress-code-content");this.iframeBody.css("max-width","none")}},shown:function(){this.editor.execCommand("mceFocus",false);$("body").hide(0,function(){$("body").show()})},hide:function(){CE.CodeModal.currentSpan.find(".motopress-drag-handle").prev().focus();this.content.val("");this.editor.setContent("");this.wpEditor.focus();var t=setTimeout(function(){CE.CodeModal.currentSpan=null;clearTimeout(t)},0)},"#motopress-save-code-content click":function(){this.switchVisual();var controller=CE.CodeModal.currentSpan.controller();var content=this.editor.getContent({format:"html"});if(content!==""){controller.shortcode.attr("data-motopress-content",content)}else{controller.shortcode.removeAttr("data-motopress-content")}controller.renderShortcode();this.element.modal("hide")},switchVisual:function(){var activeMode=MP.Utils.getEditorActiveMode(this.element.find("#wp-motopress-code-content-wrap").prop("class").split(" "));if(activeMode==="html-active"){switchEditors.switchto(this.element.find("#motopress-code-content-tmce")[0]);if(this.editor===null){this.editor=tinyMCE.get("motopress-code-content")}}}})});